{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "name": "pymupdf_skill",
  "version": "1.0.0",
  "description": "Agent-callable tools for PDF text/image extraction and rendering using PyMuPDF (fitz).",
  "functions": [
    {
      "name": "extract_text",
      "description": "Extract structured text from selected pages of a PDF.",
      "input_schema": {
        "type": "object",
        "properties": {
          "input": {"type": "string", "description": "Absolute path to the PDF file."},
          "pages": {"type": "string", "description": "Page ranges like '1-3,6'. 1-indexed."},
          "max_pages": {"type": "integer", "minimum": 1, "maximum": 1000},
          "timeout_sec": {"type": "integer", "minimum": 1, "maximum": 600}
        },
        "required": ["input"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "ok": {"type": "boolean"},
          "error": {"type": "string"},
          "pages": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "index": {"type": "integer"},
                "text": {"type": "string"},
                "blocks": {"type": "array"}
              },
              "required": ["index", "text"]
            }
          }
        },
        "required": ["ok"],
        "additionalProperties": false
      }
    },
    {
      "name": "extract_images",
      "description": "Export page renders or embedded images to a directory and return a manifest.",
      "input_schema": {
        "type": "object",
        "properties": {
          "input": {"type": "string"},
          "pages": {"type": "string"},
          "dpi": {"type": "integer", "minimum": 72, "maximum": 600, "default": 150},
          "mode": {"type": "string", "enum": ["render", "embedded"], "default": "render"},
          "format": {"type": "string", "enum": ["png", "jpg"], "default": "png"},
          "out_dir": {"type": "string"}
        },
        "required": ["input", "out_dir"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "ok": {"type": "boolean"},
          "error": {"type": "string"},
          "images": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["ok"],
        "additionalProperties": false
      }
    },
    {
      "name": "get_metadata",
      "description": "Return document metadata and outline (TOC).",
      "input_schema": {
        "type": "object",
        "properties": {
          "input": {"type": "string"}
        },
        "required": ["input"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "ok": {"type": "boolean"},
          "error": {"type": "string"},
          "metadata": {"type": "object"},
          "toc": {"type": "array"}
        },
        "required": ["ok"],
        "additionalProperties": false
      }
    },
    {
      "name": "render_pages",
      "description": "Render pages to images for preview or further processing.",
      "input_schema": {
        "type": "object",
        "properties": {
          "input": {"type": "string"},
          "pages": {"type": "string"},
          "dpi": {"type": "integer", "minimum": 72, "maximum": 600, "default": 150},
          "format": {"type": "string", "enum": ["png", "jpg"], "default": "png"},
          "out_dir": {"type": "string"}
        },
        "required": ["input", "out_dir"],
        "additionalProperties": false
      },
      "output_schema": {
        "type": "object",
        "properties": {
          "ok": {"type": "boolean"},
          "error": {"type": "string"},
          "images": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["ok"],
        "additionalProperties": false
      }
    }
  ]
}
